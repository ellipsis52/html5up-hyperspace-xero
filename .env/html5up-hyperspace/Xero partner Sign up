<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hyperspace Xero Partner 2.0 - Sign Up | Netmanagement.online</title>
  <style>
    body {
      background-color: #f5f7fa;
      margin: 0; padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      animation: fadeIn 1.2s ease-in-out;
    }
    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(30px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    #signup-container {
      max-width: 420px;
      width: 90%;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      padding: 2.5rem 3rem;
      text-align: center;
    }
    #signup-container img {
      width: 160px;
      margin-bottom: 2rem;
    }
    #signup-container h2 {
      margin-bottom: 1.5rem;
      color: #1a1a1a;
      font-weight: 600;
    }
    form label {
      display: block;
      text-align: left;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #333;
    }
    form input[type="text"],
    form input[type="email"],
    form input[type="password"] {
      width: 100%;
      padding: 0.75rem;
      margin-bottom: 1.5rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
      background: #f9f9f9;
      transition: border-color 0.3s, background-color 0.3s;
    }
    form input[type="text"]:focus,
    form input[type="email"]:focus,
    form input[type="password"]:focus {
      border-color: #8080ff;
      background: #fff;
      outline: none;
    }
    #signup-button {
      width: 100%;
      background-color: #8080ff;
      color: white;
      padding: 0.9rem;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s;
    }
    #signup-button:hover {
      background-color: #6666cc;
    }
    .message {
      margin-top: 1rem;
      font-size: 0.9rem;
      color: #e74c3c; /* rouge d'alerte */
    }
    .success {
      color: #27ae60; /* vert succès */
    }
  </style>
</head>
<body>
  <div id="signup-container">
    <img src="https://netmanagement.online/wp-content/uploads/2024/10/xero-partner-badge-RGB.png" alt="Xero Partner Badge" />
    <h2>Join our constellation</h2>
    <form id="signup-form" novalidate>
      <label for="fullname">Full Name</label>
      <input type="text" id="fullname" name="fullname" placeholder="Your full name" required />

      <label for="email">Email</label>
      <input type="email" id="email" name="email" placeholder="you@example.com" required />

      <label for="password">Password</label>
      <input type="password" id="password" name="password" placeholder="Create a password" required minlength="8" />

      <label for="confirm-password">Confirm Password</label>
      <input type="password" id="confirm-password" name="confirm-password" placeholder="Confirm your password" required minlength="8" />

      <input type="submit" id="signup-button" value="Sign Up" />
      <p id="form-message" class="message"></p>
    </form>
  </div>

  <script>
    const form = document.getElementById('signup-form');
    const messageEl = document.getElementById('form-message');

    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      messageEl.textContent = '';
      messageEl.className = 'message';

      const fullname = form.fullname.value.trim();
      const email = form.email.value.trim();
      const password = form.password.value;
      const confirmPassword = form['confirm-password'].value;

      if (!fullname || !email || !password || !confirmPassword) {
        messageEl.textContent = "Please fill in all fields.";
        return;
      }
      if (password !== confirmPassword) {
        messageEl.textContent = "Passwords don't match.";
        return;
      }
      if (password.length < 8) {
        messageEl.textContent = "Password must be at least 8 characters.";
        return;
      }

      // --- Simuler l’appel API d’inscription ---
      try {
        // Ici, tu pourrais faire un fetch POST vers ton backend d'inscription
        // Ex : 
        // const response = await fetch('/api/signup', {...})

        // Simulation réussite :
        messageEl.textContent = "Registration successful! Redirecting…";
        messageEl.classList.add('success');

        // Par exemple, rediriger après 2 secondes
        setTimeout(() => {
          window.location.href = 'https://netmanagement.online/dashboard/stripe-xero';
        }, 2000);
      } catch (error) {
        messageEl.textContent = "An error occurred, please try again.";
      }
    });
  </script>form.addEventListener('submit', async function(e) {
  e.preventDefault();
  messageEl.textContent = '';
  messageEl.className = 'message';

  const fullname = form.fullname.value.trim();
  const email = form.email.value.trim();
  const password = form.password.value;
  const confirmPassword = form['confirm-password'].value;

  if (!fullname || !email || !password || !confirmPassword) {
    messageEl.textContent = "Please fill in all fields.";
    return;
  }
  if (password !== confirmPassword) {
    messageEl.textContent = "Passwords don't match.";
    return;
  }
  if (password.length < 8) {
    messageEl.textContent = "Password must be at least 8 characters.";
    return;
  }

  try {
    const response = await fetch('/api/signup', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ fullname, email, password })
    });

    const data = await response.json();

    if (data.success) {
      messageEl.textContent = data.message + " Redirecting…";
      messageEl.classList.add('success');
      setTimeout(() => {
        window.location.href = 'https://netmanagement.online/dashboard/stripe-xero';
      }, 2000);
    } else {
      messageEl.textContent = data.message || "An error occurred.";
    }
  } catch (error) {
    messageEl.textContent = "Server error, please try again.";
  }
});

</body>
</html>
